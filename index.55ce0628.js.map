{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,qCAOA,SAASC,EAAgBC,GACvB,MAAMC,EAAcD,EAAME,aACtBF,EAAME,aAAaC,MAAM,KAAK,GAC9B,UAEEC,GAAa,EAAAC,EAAAC,eAAcN,EAAMO,WAEvC,MAAO,sHAEoEP,EAAMQ,qBAAqBR,EAAMS,sKAIhET,EAAMS,4FAGNL,6GAEAH,wD,CAO9C,SAASS,EAAoBC,GACXC,SAASC,cAAc,oBAC/BC,UAAYH,EAAOI,IAAIhB,GAAiBiB,KAAK,G,CA6BvD,SAASC,IACYL,SAASC,cAAc,wBAE/BK,iBAAiB,UAAUC,IACpCA,EAAMC,iBAxBVC,iBACE,MAAMC,EAAQV,SAASC,cAAc,yBAAyBU,MAAMC,OAEpE,IAAKF,EAAO,OAEZ,MAAMG,QAAEA,SAAkB,EAAA5B,EAAA6B,cAAaJ,EAAO,GAE1CG,EAAQE,OAAS,EACnBjB,EAAoBe,GAEpBb,SAASC,cACP,oBACAC,UAAY,8L,CAadc,EAAc,G,CAelBhB,SAASM,iBAAiB,oBAAoB,MA9C9CG,eAAiCQ,EAAO,SAChC,EAAAhC,EAAAiC,aACN,MAAML,QAAEA,SAAkB,EAAA5B,EAAAkC,sBAAqBF,GAC/CnB,EAAoBe,E,CA4CpBO,GACAf,IAbF,WACE,MAAMgB,EAAcrB,SAASC,cAAc,mBACrCqB,EAActB,SAASC,cAAc,yBAEvCoB,GAAeC,GACjBD,EAAYf,iBAAiB,SAAS,KACpCgB,EAAYX,MAAQ,EAAE,G,CAQ1BY,EAAmB","sources":["src/partials_js/catalog.js"],"sourcesContent":["import { getPopularMoviesWeek } from './api';\nimport { getGenreNames } from './weekly_trends';\nimport { getGenres } from './api';\nimport { searchMovies } from './api';\n\nlet genres = [];\n\nfunction createMovieCard(movie) {\n  const releaseYear = movie.release_date\n    ? movie.release_date.split('-')[0]\n    : 'Unknown';\n\n  const genreNames = getGenreNames(movie.genre_ids);\n\n  return `\n    <div class=\"catalog-movie-card\">\n        <img class=\"catalog-movie-img\" src=\"https://image.tmdb.org/t/p/w500${movie.poster_path}\" alt=\"${movie.title}\" />\n            <div class=\"catalog-img-overlay\"></div>\n      <div class=\"catalog-movie-info\">\n        <div>\n          <span class=\"catalog-movie-title\">${movie.title}</span>\n        </div>\n        <div>\n          <span class=\"catalog-movie-value\">${genreNames}</span>\n          <span class=\"catalog-separator\">|</span>\n          <span class=\"catalog-movie-value\">${releaseYear}</span>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\nfunction createMoviesCatalog(movies) {\n  const gallery = document.querySelector('.catalog-gallery');\n  gallery.innerHTML = movies.map(createMovieCard).join('');\n}\n\nasync function initializeCatalog(page = 1) {\n  await getGenres();\n  const { results } = await getPopularMoviesWeek(page);\n  createMoviesCatalog(results);\n}\n\nasync function handleSearch() {\n  const query = document.querySelector('.catalog-search-input').value.trim();\n\n  if (!query) return;\n\n  const { results } = await searchMovies(query, 1);\n\n  if (results.length > 0) {\n    createMoviesCatalog(results);\n  } else {\n    document.querySelector(\n      '.catalog-gallery'\n    ).innerHTML = `<p class='catalog-no-movies-found'>\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>We don't have any results matching your search.</span>\n      </p>`;\n  }\n}\n\nfunction initializeSearchForm() {\n  const searchForm = document.querySelector('.catalog-search-form');\n\n  searchForm.addEventListener('submit', event => {\n    event.preventDefault();\n    handleSearch();\n  });\n}\n\nfunction clearSearchButton() {\n  const clearButton = document.querySelector('.catalog-icon-x');\n  const searchInput = document.querySelector('.catalog-search-input');\n\n  if (clearButton && searchInput) {\n    clearButton.addEventListener('click', () => {\n      searchInput.value = '';\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initializeCatalog();\n  initializeSearchForm();\n  clearSearchButton();\n});\n"],"names":["$ll9qB","parcelRequire","$226c740939711c89$var$createMovieCard","movie","releaseYear","release_date","split","genreNames","$2qbMk","getGenreNames","genre_ids","poster_path","title","$226c740939711c89$var$createMoviesCatalog","movies","document","querySelector","innerHTML","map","join","$226c740939711c89$var$initializeSearchForm","addEventListener","event","preventDefault","async","query","value","trim","results","searchMovies","length","$226c740939711c89$var$handleSearch","page","getGenres","getPopularMoviesWeek","$226c740939711c89$var$initializeCatalog","clearButton","searchInput","$226c740939711c89$var$clearSearchButton"],"version":3,"file":"index.55ce0628.js.map"}