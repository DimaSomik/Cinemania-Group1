{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,+DAOA,SAASC,EAAgBC,GACvB,IAAMC,EAAcD,EAAME,aACtBF,EAAME,aAAaC,MAAM,KAAK,GAC9B,UAEEC,GAAa,EAAAC,EAAAC,eAAcN,EAAMO,WAEvC,MAAO,sHAE+FC,OAA3BR,EAAMS,YAAY,WAIjDD,OAJ0DR,EAAMU,MAAM,kKAOtEF,OAHAR,EAAMU,MAAM,wFAKZF,OAFAJ,EAAW,6GAECI,OAAZP,EAAY,wD,CAO1D,SAASU,EAAoBC,GACXC,SAASC,cAAc,oBAC/BC,UAAYH,EAAOI,IAAIjB,GAAiBkB,KAAK,G,UAGxCC,I,OAAAA,EAAfC,EAAAtB,EAAA,CAAAsB,EAAAC,GAAAC,MAAA,SAAAC,I,IAAiCC,EAEhBC,EAAAC,U,yEAFgBF,EAAAC,EAAAE,OAAA,YAAAF,EAAA,GAAQA,EAAA,GAAD,E,UAChC,EAAAG,EAAAC,a,wBACoB,EAAAD,EAAAE,sBAAqBN,G,OAC/CZ,EADemB,EAAAC,KAAPC,S,2CAFKd,EAAiBe,MAAAC,KAAAT,U,UAMjBU,I,OAAAA,EAAfhB,EAAAtB,EAAA,CAAAsB,EAAAC,GAAAC,MAAA,SAAAC,I,IACQc,EAIEJ,E,qEAJFI,EAAQvB,SAASC,cAAc,yBAAyBuB,MAAMC,OAE1D,C,iEAEgB,EAAAX,EAAAY,cAAaH,EAAO,G,QAAxCJ,EAASF,EAAAC,KAAPC,SAEIN,OAAS,EACnBf,EAAoBqB,GAEpBnB,SAASC,cACP,oBACAC,UAAa,+L,4CAZQkB,MAAAC,KAAAT,U,CAoB3B,SAASe,IACY3B,SAASC,cAAc,wBAE/B2B,iBAAiB,UAAU,SAAAC,GACpCA,EAAMC,iB,WAxBKR,EAAYF,MAAAC,KAAAT,U,CAyBvBmB,E,IAeJ/B,SAAS4B,iBAAiB,oBAAoB,WAX9C,IACQI,EACAC,G,WArCO5B,EAAiBe,MAAAC,KAAAT,U,CA+C9BsB,GACAP,IAZMK,EAAchC,SAASC,cAAc,mBACrCgC,EAAcjC,SAASC,cAAc,yBAEvC+B,GAAeC,GACjBD,EAAYJ,iBAAiB,SAAS,WACpCK,EAAYT,MAAQ,E","sources":["src/partials_js/catalog.js"],"sourcesContent":["import { getPopularMoviesWeek } from './api';\nimport { getGenreNames } from './weekly_trends';\nimport { getGenres } from './api';\nimport { searchMovies } from './api';\n\nlet genres = [];\n\nfunction createMovieCard(movie) {\n  const releaseYear = movie.release_date\n    ? movie.release_date.split('-')[0]\n    : 'Unknown';\n\n  const genreNames = getGenreNames(movie.genre_ids);\n\n  return `\n    <div class=\"catalog-movie-card\">\n        <img class=\"catalog-movie-img\" src=\"https://image.tmdb.org/t/p/w500${movie.poster_path}\" alt=\"${movie.title}\" />\n            <div class=\"catalog-img-overlay\"></div>\n      <div class=\"catalog-movie-info\">\n        <div>\n          <span class=\"catalog-movie-title\">${movie.title}</span>\n        </div>\n        <div>\n          <span class=\"catalog-movie-value\">${genreNames}</span>\n          <span class=\"catalog-separator\">|</span>\n          <span class=\"catalog-movie-value\">${releaseYear}</span>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\nfunction createMoviesCatalog(movies) {\n  const gallery = document.querySelector('.catalog-gallery');\n  gallery.innerHTML = movies.map(createMovieCard).join('');\n}\n\nasync function initializeCatalog(page = 1) {\n  await getGenres();\n  const { results } = await getPopularMoviesWeek(page);\n  createMoviesCatalog(results);\n}\n\nasync function handleSearch() {\n  const query = document.querySelector('.catalog-search-input').value.trim();\n\n  if (!query) return;\n\n  const { results } = await searchMovies(query, 1);\n\n  if (results.length > 0) {\n    createMoviesCatalog(results);\n  } else {\n    document.querySelector(\n      '.catalog-gallery'\n    ).innerHTML = `<p class='catalog-no-movies-found'>\n        <span>OOPS...</span>\n        <span>We are very sorry!</span>\n        <span>We don't have any results matching your search.</span>\n      </p>`;\n  }\n}\n\nfunction initializeSearchForm() {\n  const searchForm = document.querySelector('.catalog-search-form');\n\n  searchForm.addEventListener('submit', event => {\n    event.preventDefault();\n    handleSearch();\n  });\n}\n\nfunction clearSearchButton() {\n  const clearButton = document.querySelector('.catalog-icon-x');\n  const searchInput = document.querySelector('.catalog-search-input');\n\n  if (clearButton && searchInput) {\n    clearButton.addEventListener('click', () => {\n      searchInput.value = '';\n    });\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initializeCatalog();\n  initializeSearchForm();\n  clearSearchButton();\n});\n"],"names":["$bpxeT","parcelRequire","$88fb6518c9d78efd$var$createMovieCard","movie","releaseYear","release_date","split","genreNames","$dxW8t","getGenreNames","genre_ids","concat","poster_path","title","$88fb6518c9d78efd$var$createMoviesCatalog","movies","document","querySelector","innerHTML","map","join","$88fb6518c9d78efd$var$_initializeCatalog","$parcel$interopDefault","$2TvXO","mark","_callee","page","_args","arguments","length","$fpMk3","getGenres","getPopularMoviesWeek","_ctx","sent","results","apply","this","$88fb6518c9d78efd$var$_handleSearch","query","value","trim","searchMovies","$88fb6518c9d78efd$var$initializeSearchForm","addEventListener","event","preventDefault","$88fb6518c9d78efd$var$handleSearch","clearButton","searchInput","$88fb6518c9d78efd$var$initializeCatalog"],"version":3,"file":"index.160aa64a.js.map"}